{% extends "base.html" %}

{% block title %}SmartPrint Pro — Find Local Print Shops{% endblock %}

{% block content %}
  <!-- HERO -->
  <section class="hero">
    <h1>Find trusted local print shops — fast</h1>
    <p>Search for print shops, compare quotes, upload your artwork and pay securely. BoldPrint is included as a demo vendor.</p>

    <div class="searchBox">
      <input id="q" aria-label="Search" placeholder="Search e.g., branded uniforms, banners, t-shirts" />
      <button id="searchBtn" aria-label="Search button">Search</button>
    </div>

    <div class="categories">
      <div class="cat" onclick="quickSearch('uniform')">Uniforms</div>
      <div class="cat" onclick="quickSearch('t-shirt')">T-shirts</div>
      <div class="cat" onclick="quickSearch('banner')">Banners</div>
      <div class="cat" onclick="quickSearch('sticker')">Stickers</div>
      <div class="cat" onclick="quickSearch('mug')">Mugs & Gifts</div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="container">
    <h3 style="color:var(--purple)">Featured printers</h3>
    <div id="vendors" class="grid" style="margin-top:12px">
      <!-- Vendor cards (data-tags used by search filter) -->
      <div class="vendor" data-tags="uniform,banners,short-run" aria-label="BoldPrint vendor">
        <div>
          <div class="title">
            <div class="logoSmall">BP</div>
            <div>
              <h4>BoldPrint <span style="font-size:12px;color:var(--muted)">(Demo)</span></h4>
              <div style="color:var(--muted);font-size:13px">Uniforms • Banners • Short-run digital</div>
            </div>
          </div>
          <div class="meta">Rating: ★★★★☆ • 120 orders</div>
        </div>
        <div>
          <button class="viewBtn" onclick="viewShop('BoldPrint')">View shop</button>
          <button class="visitBtn" onclick="openContact('BoldPrint')">Contact</button>
        </div>
      </div>

      <div class="vendor" data-tags="design,banners,delivery" aria-label="GraphicDesign Nairobi vendor">
        <div>
          <div class="title">
            <div class="logoSmall" style="background:#c9f1ff;color:#000">GD</div>
            <div>
              <h4>GraphicDesign Nairobi</h4>
              <div style="color:var(--muted);font-size:13px">Design + Print • Fast delivery</div>
            </div>
          </div>
          <div class="meta">Rating: ★★★★☆ • 85 orders</div>
        </div>
        <div>
          <button class="viewBtn" onclick="viewShop('GraphicDesign Nairobi')">View shop</button>
          <button class="visitBtn" onclick="openContact('GraphicDesign Nairobi')">Contact</button>
        </div>
      </div>

      <div class="vendor" data-tags="signage,large-format" aria-label="SPU Print vendor">
        <div>
          <div class="title">
            <div class="logoSmall" style="background:#f2e2b2;color:#000">SP</div>
            <div>
              <h4>SPU Print</h4>
              <div style="color:var(--muted);font-size:13px">Large format & signage</div>
            </div>
          </div>
          <div class="meta">Rating: ★★★★☆ • 210 orders</div>
        </div>
        <div>
          <button class="viewBtn" onclick="viewShop('SPU Print')">View shop</button>
          <button class="visitBtn" onclick="openContact('SPU Print')">Contact</button>
        </div>
      </div>
    </div>

    <!-- HOW IT WORKS -->
    <section id="how" style="margin-top:28px">
      <h3 style="color:var(--purple)">How it works</h3>
      <div class="how">
        <div class="step"><strong>1. Search</strong><div style="color:var(--muted);margin-top:8px">Find the right print shop for your job.</div></div>
        <div class="step"><strong>2. Upload & Quote</strong><div style="color:var(--muted);margin-top:8px">Upload artwork and receive an instant quote.</div></div>
        <div class="step"><strong>3. Pay & Track</strong><div style="color:var(--muted);margin-top:8px">Pay securely and track production until collection or delivery.</div></div>
      </div>
    </section>

    <!-- FEATURES -->
    <section id="features" style="margin-top:28px">
      <h3 style="color:var(--purple)">Key features</h3>
      <div class="features">
        <div class="feature"><strong>AI file-check</strong><div style="color:var(--muted);margin-top:6px">Automatically detects low resolution and format issues.</div></div>
        <div class="feature"><strong>Instant quotes</strong><div style="color:var(--muted);margin-top:6px">Price breakdown by material, colors, urgency and quantity.</div></div>
        <div class="feature"><strong>Vendor profiles</strong><div style="color:var(--muted);margin-top:6px">See services, ratings and examples for each shop.</div></div>
        <div class="feature"><strong>M-Pesa payments</strong><div style="color:var(--muted);margin-top:6px">Safe sandbox integration for local payments.</div></div>
      </div>
    </section>

  </main>

  {% block extra_js %}
  <script>
    // quick search (categories)
    function quickSearch(term){
      document.getElementById('q').value = term;
      filterVendors();
    }

    // search filter for vendor cards
    const qInput = document.getElementById('q');
    document.getElementById('searchBtn').addEventListener('click', filterVendors);
    qInput.addEventListener('input', filterVendors);

    function filterVendors(){
      const query = qInput.value.trim().toLowerCase();
      document.querySelectorAll('.vendor').forEach(card => {
        const tags = (card.dataset.tags || '').toLowerCase();
        const text = card.innerText.toLowerCase();
        const match = query === '' || tags.includes(query) || text.includes(query);
        card.style.display = match ? '' : 'none';
      });
    }

    // view shop (demo)
    function viewShop(name){
      alert('Open shop page for: ' + name + ' (demo). In full app this goes to the vendor profile.)');
    }
  </script>
  {% endblock %}
{% endblock %}
